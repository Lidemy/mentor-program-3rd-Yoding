## 跟你朋友介紹 Git

Git是一套版本控制軟體。  

- 如果要做個比方，我會說它是個紀錄檔案歷史的相簿，但每當Git取得先前的檔案快照後，它知道怎麼還原檔案。
- 使用 Git 的好處是它在記錄版本之餘，也能錄下檔案編輯者的相關資訊，而且當 Git 連接上網路後，就化身為三頭六臂的雲端系統，在你學會操作「分支」以後，Git就能延伸出雲端和本地檔案分開存放、必要時同步的分散式系統。不過今天我只會講到怎麼在未連網的 Git 上做版本控制。



Git的基本概念
-
Git 運作時會將不同版本的檔案存在「儲存庫 Repository」、「暫存區 Index/Stage」、「工作目錄Working Directory」三個地方。

我們通常是在工作目錄裡進行檔案修改，但因為 Git不會自動更新，所以每次我們修改後都需要用`add`指令把新版檔案放進暫存區，等到所有檔案都就位後，再透過提交`commit`正式記下檔案版本。



Git的操作流程
-

####檔案初始化設定
- 以菜哥你的笑話來說，在最一開始我們要先使用`git init`把笑話存放的資料夾轉為 Git 可控管的資料夾，只要終端機上切換到該資料夾並輸入指令就可以了。

####新增版本檔案
- 接著在每次檔案修改告一段落後，就可以用`git add 檔案名稱`把檔案放入暫存區，如果嫌一個個新增太麻煩的話，可以用`git add .`一次新增所有更動檔案。不過新增檔案版本時要注意 Git 追蹤版本時需要固定的檔案名稱做線索，原本在 Git 追蹤下的檔案再更名後會被視為新檔案，需要重新使用`add`指令。

- 確認暫存區檔案都正確後，就可以提交到正式紀錄裡，這時要使用`git commit <檔案名>`，按下`commit`鍵後，Git 會切換到一個原始的編輯器 vim，你可以自由打下備註訊息，完成後按`esc`退出編輯模式（如果又臨時反悔就要再按下`a`或`i`回到編輯模式），並按下`:wq`存檔。

- 不想進入瀏覽器的話，可以用`commit -m "訊息"`直接提交。

####檢視檔案
- 完成前面的步驟後，我們基本上就完成了「單機版的 Git操作」了，但如果你對已完成的檔案不放心，可以用`git log`查看提交動作是否完成，多人協作時也可以透過這個指令了解版本資訊。

- 但如果你在提交前就想檢查看看自己的步驟是否正確，或忘記自己對 Git的設定，可以用`git status`確認現存工作目錄與暫存區之間的關係。

####更改檔案資訊
- 如果你有些檔案只是記錄自己日常的想法、靈感，還沒發展成笑話，但又不想讓 Git 耗費資源追蹤檔案，這時可以創造`.ignore`檔案來屏蔽 Git。首先輸入`touch .ignore`，再輸入`vi .ignore`進入 vim 編輯器來進行屏蔽檔案的設定，具體的格式可以參考這篇[有些檔案我不想放在 Git 裡面…](https://gitbook.tw/chapters/using-git/ignore.html)。

- 如果你想在 Git 上，直接新增或刪除檔案的話，可以分別輸入 `touch 檔案名稱`和`rm 檔案名稱`。

####撤回 Git

- 如果檔案已不再變更，我們可以移除在 Git 上的版本紀錄的話，可以輸入 `rm -r .git`， Git 就會停止版本追蹤囉！  

- 但如果你想撤回的是已經提交的檔案，那可以使用`git reset hard head~`這樣 Git 就會切回上一個版本，不過只是切回，如果你後來又發現了什麼事...，這個動作也可以撤銷的。（只不過......每次撤銷，還沒被提交的內容都會消失，如果你的記憶力和我一樣不太好，這......是把雙面刃啊。）

- 關於這部分的詳細說明請參考：[剛才的 Commit 後悔了，想要拆掉重做…](https://gitbook.tw/chapters/using-git/reset-commit.html)，使用`git reset指令`。




